if empty(glob('~/.vim/autoload/plug.vim'))
  silent !curl -fLo ~/.vim/autoload/plug.vim --create-dirs
    \ https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
  autocmd VimEnter * PlugInstall --sync | source $MYVIMRC
endif

" Plugins will be downloaded under the specified directory.
call plug#begin('~/.vim/plugged')

" Declare the list of plugins.
Plug 'kaicataldo/material.vim'
Plug 'preservim/nerdtree'
Plug 'pangloss/vim-javascript'
Plug 'mxw/vim-jsx'
Plug 'mattn/emmet-vim'
Plug 'ctrlpvim/ctrlp.vim' " fuzzy find files
Plug 'airblade/vim-gitgutter'

" List ends here. Plugins become visible to Vim after this call.
call plug#end()

" For Neovim > 0.1.5 and Vim > patch 7.4.1799 - https://github.com/vim/vim/commit/61be73bb0f965a895bfb064ea3e55476ac175162
" Based on Vim patch 7.4.1770 (`guicolors` option) - https://github.com/vim/vim/commit/8a633e3427b47286869aa4b96f2bfc1fe65b25cd
" https://github.com/neovim/neovim/wiki/Following-HEAD#20160511
if (has('termguicolors'))
  set termguicolors
endif

" ----- SET VIM THEME -----

set background=dark
"colorscheme solarized8
"let g:airline_theme = 'material'
colorscheme material
let g:material_theme_style = 'default'
let g:airline_theme = 'material'
let g:airline_extensions = ['branch', 'whitespace']
set noshowmode

" ----- END SET VIM THEME -----

syntax on
set mouse=a
filetype plugin indent on

set title

" Hide buffer instead of abandoning when unloading
set hidden

" Enhanced command line completion
set wildmenu
" Complete files like a shell
set wildmode=list:longest
set wildignore=.svn,CVS,.git,.hg,*.o,*.a,*.class,*.mo,*.la,*.so,*.obj,*.swp,*.xpm,*.pyc,*.pyo,*.log

" Show line numbers
set number
" Show cursor position
set ruler
" Show current line
set cursorline
" Highlight matches as you type
set incsearch
" Highlight matches
set hlsearch
" set case insensitivity
set ignorecase
" unless there's a capital letter
set smartcase
" Turn on line wrapping
set wrap
" Show 3 lines of context around the cursor
set scrolloff=3

" No beeping
set visualbell
" abbrev. of messages (avoids 'hit enter')
set shortmess+=filmnrxoOtT

" Don't make a backup before overwriting a file
set nobackup
" And again
set nowritebackup
" Use an SCM instead of swap files
set noswapfile

" Show the status line all the time
set laststatus=2

" http://vim.wikia.com/wiki/Backspace_and_delete_problems
set backspace=indent,eol,start

set expandtab

set autoindent
" copy the previous indentation on autoindenting
set copyindent
" use multiple of shiftwidth when indenting with '<' and '>'
set shiftround
" set show matching parenthesis
set showmatch

" Read vim config defined in files
set modeline
set modelines=1

" command and search pattern history
set history=10000

" make plugins smoother
set lazyredraw

" always replace all occurences of a line
set gdefault

" http://vim.wikia.com/wiki/Toggle_auto-indenting_for_code_paste
set pastetoggle=<F2>

" disable folding
set nofoldenable

" Tabs and indentation
set autoindent
set smartindent
set tabstop=2
set shiftwidth=2
set softtabstop=2

set splitbelow

" Enable Alt key for terminal emulator
" https://stackoverflow.com/questions/6778961/alt-key-shortcuts-not-working-on-gnome-terminal-with-vim#answer-10216459
let c='a'
while c <= 'z'
  exec "set <A-".c.">=\e".c
  exec "imap \e".c." <A-".c.">"
  let c = nr2char(1+char2nr(c))
endw

set timeout ttimeoutlen=50

inoremap {      {}<Left>
inoremap {<CR>  {<CR>}<Esc>O
inoremap {{     {
inoremap {}     {}

" Copy
vnoremap <C-c> yi

" Paste
nnoremap <C-v> pi
inoremap <C-v> <ESC>pi

" Cut
vnoremap <C-x> xi

" Undo
nnoremap <C-z> <nop>
vnoremap <C-z> <nop>
inoremap <C-z> <nop>
nnoremap <C-z> u
vnoremap <C-z> u
inoremap <C-z> <C-O>u

" Make the view port scroll faster
nnoremap <C-e> 3<C-e>
nnoremap <C-y> 3<C-y>
nnoremap <C-p> 3<C-p>

" Text selection
nnoremap <S-Up> v
nnoremap <S-Down> v
nnoremap <S-Left> v
nnoremap <S-Right> v
inoremap <S-Up> <Esc>v
inoremap <S-Down> <Esc>v
inoremap <S-Left> <Esc>v
inoremap <S-Right> <Esc>v
vnoremap <S-Up> k
vnoremap <S-Down> j
vnoremap <S-Left> h
vnoremap <S-Right> l

" Select all
map <C-a> <esc>ggVG<CR>

" Find
nnoremap <C-f> <esc>/
inoremap <C-f> <esc>/
" Find and replace
nnoremap <C-h> <esc>:%s///g
inoremap <C-h> <esc>:%s///g

" Duplicate line
nnoremap <C-d> <esc>:t.<CR>i
vnoremap <C-d> <esc>:t.<CR>i
inoremap <C-d> <esc>:t.<CR>i

" Backspace
nnoremap <BS> i<BS>
vnoremap <BS> i<BS>

" Move up/down
nnoremap <A-Down> :m .+1<CR>==
nnoremap <A-Up> :m .-2<CR>==
inoremap <A-Down> <Esc>:m .+1<CR>==gi
inoremap <A-Up> <Esc>:m .-2<CR>==gi
vnoremap <A-Down> :m '>+1<CR>gv=gv
vnoremap <A-Up> :m '<-2<CR>gv=gv

"" Plugins

" NERDTree
" autocmd vimenter * NERDTree
map <C-n> :NERDTreeToggle<CR>
